(this.webpackJsonpspeaking=this.webpackJsonpspeaking||[]).push([[0],{37:function(e,t,n){e.exports=n(71)},42:function(e,t,n){},43:function(e,t,n){},67:function(e,t){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(31),r=n.n(o),i=(n(42),n(1)),u=(n(43),n(5));function l(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}function s(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var f=n(6);function m(){var e=Object(u.a)(["\n    margin: 0 auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    "]);return m=function(){return e},e}function v(){var e=Object(u.a)(["\n    margin: 1em;\n    width: 80%;\n    text-align: center;\n    min-height: 1.2em;\n    font-size: ",";\n    font-weight: ",";\n    ","\n    "]);return v=function(){return e},e}var h=f.a.span(v(),(function(e){return void 0===e.fontSize?"3em":e.fontSize}),(function(e){return void 0===e.fontWeight?"100":e.fontWeight}),(function(e){return void 0===e.color?"":"color:"+e.color+";"})),b=f.a.div(m());var d=function(e){return c.a.createElement(b,null,c.a.createElement(h,{color:e.nameColor},e.personName),c.a.createElement(h,{color:"orange",fontSize:"2em"},""===e.sentence?"":'"'.concat(e.sentence,'"')))},g=function(e){var t=e.show,n=e.speed,o=e.children;void 0===n&&(n="0.5s");var r=Object(a.useState)(t),u=Object(i.a)(r,2),l=u[0],s=u[1];Object(a.useEffect)((function(){t&&s(!0)}),[t]);return l&&c.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," ").concat(n)},onAnimationEnd:function(){t||s(!1)}},o)};function p(){var e=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: -10;\n  background: ",";  \n"]);return p=function(){return e},e}var O=f.a.div(p(),(function(e){return void 0===e.bgColor?"white":e.bgColor}));function j(e){var t=e.onSubmitF,n=e.voiceIndex,a=e.voiceOnChanged,o=e.voices,r=e.pitch,i=e.rate,u=e.pitchOnChanged,l=e.rateOnChanged;return console.log("speak form",n),c.a.createElement("form",{onSubmit:t},c.a.createElement("select",{value:n,onChange:function(e){a(e.target.value)}},o.map((function(e,t){return c.a.createElement("option",{key:t,value:t},"".concat(e.name," (").concat(e.lang,")"))}))),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"pitch"},"pitch"),c.a.createElement("input",{type:"number",step:.01,value:r,onChange:function(e){u(e.target.value)},id:"pitch"}),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"rate"},"rate"),c.a.createElement("input",{type:"number",step:.01,value:i,onChange:function(e){l(e.target.value)},id:"rate"}),c.a.createElement("input",{type:"submit"}))}var E,S=function(e){var t=window.speechSynthesis,n=Object(a.useState)(t.getVoices()),o=Object(i.a)(n,2),r=o[0],u=o[1],f=Object(a.useState)(0),m=Object(i.a)(f,2),v=m[0],h=m[1],b=Object(a.useState)(1),p=Object(i.a)(b,2),E=p[0],S=p[1],k=Object(a.useState)(1),w=Object(i.a)(k,2),C=w[0],y=w[1],x=Object(a.useState)(!1),F=Object(i.a)(x,2),I=F[0],z=F[1],V=e.toSpeak,W=e.sentence,B=e.changeVoice,N=s(V),J=s(B),M=Object(a.useState)(""),R=Object(i.a)(M,2),T=R[0],A=R[1];Object(a.useEffect)((function(){V&&!I&&N!==V&&void 0!==W&&D(W)}),[V,W]),Object(a.useEffect)((function(){J!==B&&h(Math.floor(Math.random()*r.length))}),[B]),t.onvoiceschanged=function(){for(var e=t.getVoices(),n=0;n<e.length;n++)if(e[n].default){h(n);break}u(e)},l((function(){t.speaking||(e.speakOver(),z(!1))}),I?200:null);var D=function(e){z(!0),A(e);var n=new SpeechSynthesisUtterance(e);n.voice=r[v],n.pitch=E,n.rate=C,t.speak(n)},L={onSubmitF:function(e){e.preventDefault(),D("hello")},voiceIndex:v,voiceOnChanged:h,voices:r,pitch:E,rate:C,pitchOnChanged:S,rateOnChanged:y},U=void 0!==r[v]?"".concat(r[v].name," (").concat(r[v].lang,")"):"";return c.a.createElement(c.a.Fragment,null,e.form&&c.a.createElement(j,L),c.a.createElement(d,{personName:U,sentence:T,nameColor:I?"black":"white"}),c.a.createElement(g,{show:I,speed:"0.3s"},c.a.createElement(O,null)))},k=n(34),w=n.n(k),C="https://stage-effect-server1.herokuapp.com",y=function(){!0,console.log("socket connect to server")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=w()(C+e);return void 0===E&&(E=n),n.on("connect",t),n},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;void 0!==E&&n.on(e,t)},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;n.emit(e,t)};var z=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],r=n[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),f=s[0],m=s[1],v=Object(a.useState)(-1),h=Object(i.a)(v,2),b=h[0],d=h[1],g=Object(a.useState)(!1),p=Object(i.a)(g,2),O=p[0],j=p[1],E=Object(a.useState)(!1),k=Object(i.a)(E,2),w=k[0],C=k[1],y=Object(a.useState)(!0),z=Object(i.a)(y,2),V=z[0],W=z[1];Object(a.useEffect)((function(){e.start&&B()}),[e.start]),Object(a.useState)((function(){x("/receiver"),F("debug",(function(e){console.log(e),"showForm"===e.mode&&W(e.value)})),F("speak",(function(e){o||(console.log("speak!",e),m(e.text),d(e.id),r(!0))})),F("speakConfig",(function(e){console.log(e),"changeVoice"===e.mode&&B()}))})),l((function(){j(!O)}),w?100:null);var B=function(){C(!0),setTimeout((function(){C(!1)}),2e3)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,{toSpeak:o,sentence:f,speakOver:function(){r(!1),console.log("speak over",b),I("speakOver",{id:b})},changeVoice:O,form:V}))};n(70);var V=function(e){return c.a.createElement("div",{id:"LandpageWrapper"},c.a.createElement("button",{className:"selectBtn",onClick:e.select},"Start"))};var W=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),u=Object(i.a)(r,2),l=u[0],s=u[1];return c.a.createElement("div",null,c.a.createElement(g,{show:n},c.a.createElement(V,{select:function(){o(!1),setTimeout((function(){s(!0)}),1e3)}})),c.a.createElement(g,{show:l},c.a.createElement(z,{start:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.c0b4faae.chunk.js.map