(this.webpackJsonpspeaking=this.webpackJsonpspeaking||[]).push([[0],{37:function(e,t,n){e.exports=n(71)},42:function(e,t,n){},43:function(e,t,n){},67:function(e,t){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(31),r=n.n(o),i=(n(42),n(1));n(43);function u(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}function l(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var s=n(5),f=n(6);function m(){var e=Object(s.a)(["\n    margin: 0 auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    "]);return m=function(){return e},e}function h(){var e=Object(s.a)(["\n    margin: 1em;\n    width: 80%;\n    text-align: center;\n    min-height: 1.2em;\n    font-size: ",";\n    font-weight: ",";\n    ","\n    "]);return h=function(){return e},e}var v=f.a.span(h(),(function(e){return void 0===e.fontSize?"3em":e.fontSize}),(function(e){return void 0===e.fontWeight?"100":e.fontWeight}),(function(e){return void 0===e.color?"":"color:"+e.color+";"})),b=f.a.div(m());var d=function(e){return c.a.createElement(b,null,c.a.createElement(v,{color:e.nameColor},e.personName),c.a.createElement(v,{color:"orange",fontSize:"2em"},""===e.sentence?"":'"'.concat(e.sentence,'"')))},p=function(e){var t=e.show,n=e.speed,o=e.children;void 0===n&&(n="0.5s");var r=Object(a.useState)(t),u=Object(i.a)(r,2),l=u[0],s=u[1];Object(a.useEffect)((function(){t&&s(!0)}),[t]);return l&&c.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," ").concat(n)},onAnimationEnd:function(){t||s(!1)}},o)};function g(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  z-index: -10;\n  background: ",";  \n"]);return g=function(){return e},e}var O=f.a.div(g(),(function(e){return void 0===e.bgColor?"white":e.bgColor})),j=new Set(["Amelie","Ioana","Joana","Laura","Sara","Xander"]);new Set(["fr-CA","ro-RO","pt-PT","sk-SK","da-DK","nl-NL"]);function E(e){var t=e.onSubmitF,n=e.voiceIndex,a=e.voiceOnChanged,o=e.voices,r=e.pitch,i=e.rate,u=e.pitchOnChanged,l=e.rateOnChanged;return c.a.createElement("form",{onSubmit:t},c.a.createElement("select",{value:n,onChange:function(e){a(e.target.value)}},o.map((function(e,t){return c.a.createElement("option",{key:t,value:t},"".concat(e.name," (").concat(e.lang,")"))}))),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"pitch"},"pitch"),c.a.createElement("input",{type:"number",step:.01,value:r,onChange:function(e){u(e.target.value)},id:"pitch"}),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"rate"},"rate"),c.a.createElement("input",{type:"number",step:.01,value:i,onChange:function(e){l(e.target.value)},id:"rate"}),c.a.createElement("input",{type:"submit"}))}var S,w=function(e){var t=function(){for(var e=n.getVoices(),t="",a=0;a<e.length;a++){for(;(j.has(e[a].name)||e[a].name===t)&&a<e.length;)e.splice(a,1);t=e[a].name,e[a].default&&f(a)}return e},n=window.speechSynthesis,o=Object(a.useState)(0),r=Object(i.a)(o,2),s=r[0],f=r[1],m=Object(a.useState)((function(){return t()})),h=Object(i.a)(m,2),v=h[0],b=h[1],g=Object(a.useState)(1),S=Object(i.a)(g,2),w=S[0],k=S[1],C=Object(a.useState)(1),y=Object(i.a)(C,2),x=y[0],F=y[1],I=Object(a.useState)(!1),V=Object(i.a)(I,2),N=V[0],z=V[1],R=e.toSpeak,W=e.data,A=e.changeVoice,B=l(R),J=l(A),L=Object(a.useState)(""),T=Object(i.a)(L,2),U=T[0],D=T[1];Object(a.useEffect)((function(){R&&!N&&B!==R&&W.text&&(W.rate&&F(W.rate),W.pitch&&k(W.pitch),M(W.text,W.pitch?W.pitch:w,W.rate?W.rate:x))}),[R,W]),Object(a.useEffect)((function(){J!==A&&f(Math.floor(Math.random()*v.length))}),[A]),Object(a.useEffect)((function(){e.changeVoiceCallback({name:v[s].name,lang:v[s].lang})}),[s]),n.onvoiceschanged=function(){b(t())},u((function(){n.speaking||(e.speakOver(),z(!1))}),N?100:null);var K=function(e){z(!0),D(e);var t=new SpeechSynthesisUtterance(e);t.voice=v[s],t.pitch=w,t.rate=x,n.speak(t)},M=function(e,t,a){z(!0),D(e);var c=new SpeechSynthesisUtterance(e);c.voice=v[s],c.pitch=t,c.rate=a,n.speak(c)},G={onSubmitF:function(e){e.preventDefault(),K("hello")},voiceIndex:s,voiceOnChanged:f,voices:v,pitch:w,rate:x,pitchOnChanged:k,rateOnChanged:F},P=void 0!==v[s]?"".concat(v[s].name," (").concat(v[s].lang,")"):"";return c.a.createElement(c.a.Fragment,null,e.form&&c.a.createElement(E,G),c.a.createElement(d,{personName:P,sentence:U,nameColor:N?"black":"white"}),c.a.createElement(p,{show:N,speed:"0.3s"},c.a.createElement(O,null)))},k=n(34),C=n.n(k),y="https://stage-effect-server1.herokuapp.com",x=function(){!0,console.log("socket connect to server")},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=C()(y+e);return void 0===S&&(S=n),n.on("connect",t),n},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;void 0!==S&&n.on(e,t)},V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;n.emit(e,t)};var N=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(-1),s=Object(i.a)(l,2),f=s[0],m=s[1],h=Object(a.useState)(!1),v=Object(i.a)(h,2),b=v[0],d=v[1],g=Object(a.useState)(!1),j=Object(i.a)(g,2),E=j[0],S=j[1],k=Object(a.useState)(!1),C=Object(i.a)(k,2),y=C[0],x=C[1],N=Object(a.useState)({}),z=Object(i.a)(N,2),R=z[0],W=z[1],A=Object(a.useState)(),B=Object(i.a)(A,2),J=B[0],L=B[1],T=Object(a.useState)(null),U=Object(i.a)(T,2),D=U[0],K=U[1];Object(a.useEffect)((function(){D&&M()}),[D]),Object(a.useEffect)((function(){!E&&J&&V("speakConfig",{mode:"changeVoice",voice:J})}),[E,J]),Object(a.useState)((function(){F("/receiver",(function(){K(!0)})),I("disconnect",(function(){K(!1)})),I("debug",(function(e){console.log(e),"showForm"===e.mode&&x(e.value)})),I("speak",(function(e){o||(console.log("speak!",e),W(e),m(e.id),r(!0))})),I("speakConfig",(function(e){console.log(e),"changeVoice"===e.mode?M():"showForm"===e.mode?x(!0):"hideForm"===e.mode&&x(!1)}))})),u((function(){d(!b)}),E?100:null);var M=function(){S(!0),setTimeout((function(){S(!1)}),2e3)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{show:D},c.a.createElement(w,{toSpeak:o,data:R,speakOver:function(){r(!1),console.log("speak over",f),-1!==f&&V("speakOver",{id:f})},changeVoice:b,changeVoiceCallback:function(e){L(e)},form:y})),c.a.createElement(p,{show:!1===D},c.a.createElement(O,{bgColor:"black"},c.a.createElement("span",null,"CONNECTING SERVER"))))};n(70);var z=function(e){return c.a.createElement("div",{id:"LandpageWrapper"},c.a.createElement("button",{className:"selectBtn",onClick:e.select},"Start"))};var R=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),u=Object(i.a)(r,2),l=u[0],s=u[1];return c.a.createElement("div",null,c.a.createElement(p,{show:n},c.a.createElement(z,{select:function(){o(!1),s(!0),window.speechSynthesis.speak(new SpeechSynthesisUtterance(""))}})),c.a.createElement(p,{show:l},c.a.createElement(N,{start:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.03fef39c.chunk.js.map