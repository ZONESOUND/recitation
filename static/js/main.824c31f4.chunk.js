(this.webpackJsonpspeaking=this.webpackJsonpspeaking||[]).push([[0],{37:function(e,t,n){e.exports=n(71)},42:function(e,t,n){},43:function(e,t,n){},67:function(e,t){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(31),r=n.n(o),i=(n(42),n(1));n(43);function u(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}function l(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var s=n(5),f=n(6);function m(){var e=Object(s.a)(["\n    margin: 0 auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    "]);return m=function(){return e},e}function h(){var e=Object(s.a)(["\n    margin: 1em;\n    width: 80%;\n    text-align: center;\n    min-height: 1.2em;\n    font-size: ",";\n    font-weight: ",";\n    ","\n    "]);return h=function(){return e},e}var v=f.a.span(h(),(function(e){return void 0===e.fontSize?"3em":e.fontSize}),(function(e){return void 0===e.fontWeight?"100":e.fontWeight}),(function(e){return void 0===e.color?"":"color:"+e.color+";"})),p=f.a.div(m());var b=function(e){var t="",n=0;return e.speakingVoice.length>0&&(e.speakingVoice.forEach((function(a){(a=JSON.parse(a)).name&&(n>10||"".concat(a.name," (").concat(a.lang,")")!==e.personName&&(++n>1&&(t+=10==n?" and ":", "),t+=a.name))})),n>0&&(t+=n>1?" are ":" is ",t+="speaking...")),c.a.createElement(p,null,c.a.createElement(v,{color:e.nameColor},e.personName),c.a.createElement(v,{color:"orange",fontSize:"2em"},""===e.sentence?"":'"'.concat(e.sentence,'"')),c.a.createElement(v,{color:"gray",fontSize:"1em"},t))},g=function(e){var t=e.show,n=e.speed,o=e.children;void 0===n&&(n="0.5s");var r=Object(a.useState)(t),u=Object(i.a)(r,2),l=u[0],s=u[1];Object(a.useEffect)((function(){t&&s(!0)}),[t]);return l&&c.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," ").concat(n)},onAnimationEnd:function(){t||s(!1)}},o)};function d(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  z-index: -10;\n  background: ",";  \n"]);return d=function(){return e},e}var O=f.a.div(d(),(function(e){return void 0===e.bgColor?"white":e.bgColor})),j=new Set(["Amelie","Ioana","Joana","Laura","Sara","Xander"]);new Set(["fr-CA","ro-RO","pt-PT","sk-SK","da-DK","nl-NL"]);function E(e){var t=e.onSubmitF,n=e.voiceIndex,a=e.voiceOnChanged,o=e.voices,r=e.pitch,i=e.rate,u=e.pitchOnChanged,l=e.rateOnChanged;return c.a.createElement("form",{onSubmit:t},c.a.createElement("select",{value:n,onChange:function(e){a(e.target.value)}},o.map((function(e,t){return c.a.createElement("option",{key:t,value:t},"".concat(e.name," (").concat(e.lang,")"))}))),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"pitch"},"pitch"),c.a.createElement("input",{type:"number",step:.01,value:r,onChange:function(e){u(e.target.value)},id:"pitch"}),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"rate"},"rate"),c.a.createElement("input",{type:"number",step:.01,value:i,onChange:function(e){l(e.target.value)},id:"rate"}),c.a.createElement("input",{type:"submit"}))}var S,k=function(e){var t=function(){for(var e=n.getVoices(),t="",a=0;a<e.length;a++){for(;(j.has(e[a].name)||e[a].name===t)&&a<e.length;)e.splice(a,1);t=e[a].name,e[a].default&&f(a)}return e},n=window.speechSynthesis,o=Object(a.useState)(0),r=Object(i.a)(o,2),s=r[0],f=r[1],m=Object(a.useState)((function(){return t()})),h=Object(i.a)(m,2),v=h[0],p=h[1],d=Object(a.useState)(1),S=Object(i.a)(d,2),k=S[0],w=S[1],C=Object(a.useState)(1),y=Object(i.a)(C,2),V=y[0],x=y[1],F=Object(a.useState)(!1),N=Object(i.a)(F,2),I=N[0],z=N[1],R=e.toSpeak,W=e.data,J=e.changeVoice,A=l(R),B=l(J),L=Object(a.useState)(""),T=Object(i.a)(L,2),U=T[0],D=T[1];Object(a.useEffect)((function(){R&&!I&&A!==R&&W.text&&(W.rate&&x(W.rate),W.pitch&&w(W.pitch),M(W.text,W.pitch?W.pitch:k,W.rate?W.rate:V))}),[R,W]),Object(a.useEffect)((function(){B!==J&&f(Math.floor(Math.random()*v.length))}),[J]),Object(a.useEffect)((function(){e.changeVoiceCallback({name:v[s].name,lang:v[s].lang})}),[s]),n.onvoiceschanged=function(){p(t())},u((function(){n.speaking||(e.speakOver(),z(!1),D(""))}),I?100:null);var K=function(e){z(!0),D(e);var t=new SpeechSynthesisUtterance(e);t.voice=v[s],t.pitch=k,t.rate=V,n.speak(t)},M=function(e,t,a){z(!0),D(e);var c=new SpeechSynthesisUtterance(e);c.voice=v[s],c.pitch=t,c.rate=a,n.speak(c)},G={onSubmitF:function(e){e.preventDefault(),K("hello")},voiceIndex:s,voiceOnChanged:f,voices:v,pitch:k,rate:V,pitchOnChanged:w,rateOnChanged:x},P=void 0!==v[s]?"".concat(v[s].name," (").concat(v[s].lang,")"):"";return c.a.createElement(c.a.Fragment,null,e.form&&c.a.createElement(E,G),c.a.createElement(b,{personName:P,sentence:U,speakingVoice:e.nowSpeak,nameColor:I?"black":"white"}),c.a.createElement(g,{show:I,speed:"0.3s"},c.a.createElement(O,null)))},w=n(34),C=n.n(w),y="https://stage-effect-server1.herokuapp.com",V=function(){!0,console.log("socket connect to server")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,n=C()(y+e);return void 0===S&&(S=n),n.on("connect",t),n},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;void 0!==S&&n.on(e,t)},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;n.emit(e,t)};var I=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(-1),s=Object(i.a)(l,2),f=s[0],m=s[1],h=Object(a.useState)(!1),v=Object(i.a)(h,2),p=v[0],b=v[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),E=j[0],S=j[1],w=Object(a.useState)(!1),C=Object(i.a)(w,2),y=C[0],V=C[1],I=Object(a.useState)({}),z=Object(i.a)(I,2),R=z[0],W=z[1],J=Object(a.useState)(),A=Object(i.a)(J,2),B=A[0],L=A[1],T=Object(a.useState)(null),U=Object(i.a)(T,2),D=U[0],K=U[1],M=Object(a.useState)([]),G=Object(i.a)(M,2),P=G[0],X=G[1];Object(a.useEffect)((function(){D&&$()}),[D]),Object(a.useEffect)((function(){!E&&B&&(console.log("emit voice!"),N("speakConfig",{mode:"changeVoice",voice:B}))}),[E,B]),Object(a.useState)((function(){x("/receiver",(function(){K(!0)})),F("disconnect",(function(){K(!1)})),F("debug",(function(e){console.log(e),"showForm"===e.mode&&V(e.value)})),F("speak",(function(e){o||(console.log("speak!",e),W(e),m(e.id),r(!0))})),F("speakConfig",(function(e){console.log(e),"changeVoice"===e.mode?$():"showForm"===e.mode?V(!0):"hideForm"===e.mode?V(!1):"nowSpeak"===e.mode&&X(e.data)}))})),u((function(){b(!p)}),E?100:null);var $=function(){S(!0),setTimeout((function(){S(!1)}),2e3)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(g,{show:D},c.a.createElement(k,{toSpeak:o,data:R,speakOver:function(){r(!1),console.log("speak over",f),-1!==f&&N("speakOver",{id:f,voice:B})},changeVoice:p,changeVoiceCallback:function(e){L(e)},nowSpeak:P,form:y})),c.a.createElement(g,{show:!1===D},c.a.createElement(O,{bgColor:"black"},c.a.createElement("span",null,"CONNECTING SERVER"))))};n(70);var z=function(e){return c.a.createElement("div",{id:"LandpageWrapper"},c.a.createElement("button",{className:"selectBtn",onClick:e.select},"Start"))};var R=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),u=Object(i.a)(r,2),l=u[0],s=u[1];return c.a.createElement("div",null,c.a.createElement(g,{show:n},c.a.createElement(z,{select:function(){o(!1),s(!0),window.speechSynthesis.speak(new SpeechSynthesisUtterance(""))}})),c.a.createElement(g,{show:l},c.a.createElement(I,{start:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.824c31f4.chunk.js.map