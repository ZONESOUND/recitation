(this.webpackJsonpspeaking=this.webpackJsonpspeaking||[]).push([[0],Array(46).concat([function(e,t,n){e.exports=n(141)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t){},,,,function(e,t,n){},,,,,function(e,t,n){var a={"./s1/s1_1.mp3":82,"./s1/s1_10.mp3":83,"./s1/s1_11.mp3":84,"./s1/s1_12.mp3":85,"./s1/s1_13.mp3":86,"./s1/s1_14.mp3":87,"./s1/s1_15.mp3":88,"./s1/s1_2.mp3":89,"./s1/s1_3.mp3":90,"./s1/s1_4.mp3":91,"./s1/s1_5.mp3":92,"./s1/s1_6.mp3":93,"./s1/s1_7.mp3":94,"./s1/s1_8.mp3":95,"./s1/s1_9.mp3":96,"./s2/s2_1.mp3":97,"./s2/s2_10.mp3":98,"./s2/s2_11.mp3":99,"./s2/s2_12.mp3":100,"./s2/s2_13.mp3":101,"./s2/s2_14.mp3":102,"./s2/s2_15.mp3":103,"./s2/s2_16.mp3":104,"./s2/s2_17.mp3":105,"./s2/s2_18.mp3":106,"./s2/s2_19.mp3":107,"./s2/s2_2.mp3":108,"./s2/s2_20.mp3":109,"./s2/s2_21.mp3":110,"./s2/s2_3.mp3":111,"./s2/s2_4.mp3":112,"./s2/s2_5.mp3":113,"./s2/s2_6.mp3":114,"./s2/s2_7.mp3":115,"./s2/s2_8.mp3":116,"./s2/s2_9.mp3":117,"./s3/s3_1.mp3":118,"./s3/s3_10.mp3":119,"./s3/s3_11.mp3":120,"./s3/s3_12.mp3":121,"./s3/s3_2.mp3":122,"./s3/s3_3.mp3":123,"./s3/s3_4.mp3":124,"./s3/s3_5.mp3":125,"./s3/s3_6.mp3":126,"./s3/s3_7.mp3":127,"./s3/s3_8.mp3":128,"./s3/s3_9.mp3":129,"./s4/s4_1.mp3":130,"./s4/s4_10.mp3":131,"./s4/s4_2.mp3":132,"./s4/s4_3.mp3":133,"./s4/s4_4.mp3":134,"./s4/s4_5.mp3":135,"./s4/s4_6.mp3":136,"./s4/s4_7.mp3":137,"./s4/s4_8.mp3":138,"./s4/s4_9.mp3":139};function s(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=o,e.exports=s,s.id=81},function(e,t,n){e.exports=n.p+"static/media/s1_1.ea669680.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_10.86731729.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_11.95383e2b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_12.3062e67b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_13.b223aab5.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_14.425a4fa9.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_15.fb288ce4.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_2.11641a51.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_3.9a7edbf0.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_4.fd8f3b17.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_5.1715ef81.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_6.eb1c2009.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_7.3fd68304.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_8.137fa916.mp3"},function(e,t,n){e.exports=n.p+"static/media/s1_9.58675f81.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_1.61d94d7a.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_10.32934c47.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_11.4525b266.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_12.256207f1.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_13.ce7afcc0.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_14.1bd26a4b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_15.469f9148.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_16.0dbcbb7b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_17.b670b4ad.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_18.6abec9c8.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_19.7e1a4507.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_2.97535c05.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_20.7cf882bb.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_21.10b42381.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_3.9d064e7e.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_4.d96ad941.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_5.6f1abd87.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_6.39526b5b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_7.b3c61a37.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_8.310685bd.mp3"},function(e,t,n){e.exports=n.p+"static/media/s2_9.aa5ed891.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_1.c04f3a6c.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_10.8a1bd855.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_11.54e4d9cc.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_12.8ce769a6.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_2.5a06303c.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_3.c47b3e10.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_4.0927eb75.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_5.5a246722.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_6.d5983b6d.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_7.a95f2c4b.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_8.3fb87d75.mp3"},function(e,t,n){e.exports=n.p+"static/media/s3_9.eaeeec72.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_1.0392c9c6.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_10.31489083.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_2.fc63c56a.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_3.03a1916a.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_4.1572c20f.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_5.f386648a.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_6.ab563acd.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_7.62744ba7.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_8.bcb0d03f.mp3"},function(e,t,n){e.exports=n.p+"static/media/s4_9.b75fdf32.mp3"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,s=n(0),o=n.n(s),c=n(32),i=n.n(c),r=(n(51),n(1)),p=(n(52),n(33)),u=n.n(p),m="https://stage-effect-server1.herokuapp.com",f=function(){!0,console.log("socket connect to server")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=u()(m+e);return void 0===a&&(a=n),n.on("connect",t),n},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;void 0!==a&&n.on(e,t)},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;n.emit(e,t)};function h(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=e})),Object(s.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}function _(e){var t=Object(s.useRef)();return Object(s.useEffect)((function(){t.current=e}),[e]),t.current}var v=n(34),g=n(35),O=n(42),x=n(36),j=n(45),E=n(5),S=n(6),k=n(37);n(76);function w(){var e=Object(E.a)(["\n    margin: 0 auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    "]);return w=function(){return e},e}function y(){var e=Object(E.a)(["\n    margin: 1em;\n    width: 80%;\n    text-align: center;\n    min-height: 1.2em;\n    font-size: ",";\n    font-weight: ",";\n    ","\n    "]);return y=function(){return e},e}var C=S.a.span(y(),(function(e){return void 0===e.fontSize?"3em":e.fontSize}),(function(e){return void 0===e.fontWeight?"200":e.fontWeight}),(function(e){return void 0===e.color?"":"color:"+e.color+";"})),F=S.a.div(w());var M=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(O.a)(this,Object(x.a)(t).call(this,e))).myRef=o.a.createRef(),n.state={siriWave:null},n}return Object(j.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({siriWave:new k.a({container:this.myRef.current,style:"ios9",width:320,height:100,speed:.2,amplitude:.1,autostart:!0})}),setTimeout((function(){e.state.siriWave&&e.state.siriWave.setAmplitude(0)}),50)}},{key:"shouldComponentUpdate",value:function(e,t){return null!=this.state.siriWave&&(e.start!==this.props.start&&(e.start?this.state.siriWave.setAmplitude(1):this.state.siriWave.setAmplitude(0),!0))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:this.myRef}))}}]),t}(o.a.Component),W=function(e){var t="",n=0;return e.speakingVoice.length>0&&(e.speakingVoice.forEach((function(a){null!=a&&(a=JSON.parse(a)).name&&(n>10||"".concat(a.name," (").concat(a.lang,")")!==e.personName&&(++n>1&&(t+=10==n?" and ":", "),t+=a.name))})),n>0&&(t+=n>1?" are ":" is ",t+="speaking...")),o.a.createElement(F,null,o.a.createElement(C,{color:e.nameColor},e.personName),o.a.createElement(C,{color:"orange",fontSize:"2em"},""===e.sentence?"":'"'.concat(e.sentence,'"')),o.a.createElement(C,{color:"gray",fontSize:"1.5em"},t),o.a.createElement(M,{start:""!==e.sentence}))},N=function(e){var t=e.show,n=e.speed,a=e.children;void 0===n&&(n="0.5s");var c=Object(s.useState)(t),i=Object(r.a)(c,2),p=i[0],u=i[1];Object(s.useEffect)((function(){t&&u(!0)}),[t]);return p&&o.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," ").concat(n)},onAnimationEnd:function(){t||u(!1)}},a)};function V(){var e=Object(E.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  z-index: -10;\n  background: ",";  \n"]);return V=function(){return e},e}var R=S.a.div(V(),(function(e){return void 0===e.bgColor?"white":e.bgColor})),T=new Set(["Amelie","Ioana","Joana","Laura","Sara","Xander"]);new Set(["fr-CA","ro-RO","pt-PT","sk-SK","da-DK","nl-NL"]);function I(e){var t=e.onSubmitF,n=e.voiceIndex,a=e.voiceOnChanged,s=e.voices,c=e.pitch,i=e.rate,r=e.pitchOnChanged,p=e.rateOnChanged;return o.a.createElement("form",{onSubmit:t},o.a.createElement("select",{value:n,onChange:function(e){a(e.target.value)}},s.map((function(e,t){return o.a.createElement("option",{key:t,value:t},"".concat(e.name," (").concat(e.lang,")"))}))),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"pitch"},"pitch"),o.a.createElement("input",{type:"number",step:.01,value:c,onChange:function(e){r(e.target.value)},id:"pitch"}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"rate"},"rate"),o.a.createElement("input",{type:"number",step:.01,value:i,onChange:function(e){p(e.target.value)},id:"rate"}),o.a.createElement("input",{type:"submit"}))}var A=function(e){var t=function(){for(var e=n.getVoices(),t="",a=0;a<e.length;a++){for(;(T.has(e[a].name)||e[a].name===t)&&a<e.length;)e.splice(a,1);t=e[a].name,e[a].default&&p(a)}return e},n=window.speechSynthesis,a=Object(s.useState)(0),c=Object(r.a)(a,2),i=c[0],p=c[1],u=Object(s.useState)((function(){return t()})),m=Object(r.a)(u,2),f=m[0],l=m[1],d=Object(s.useState)(1),b=Object(r.a)(d,2),v=b[0],g=b[1],O=Object(s.useState)(1),x=Object(r.a)(O,2),j=x[0],E=x[1],S=Object(s.useState)(!1),k=Object(r.a)(S,2),w=k[0],y=k[1],C=e.toSpeak,F=e.data,M=e.changeVoice,V=_(C),A=_(M),D=Object(s.useState)(""),z=Object(r.a)(D,2),U=z[0],B=z[1];Object(s.useEffect)((function(){C&&!w&&V!==C&&F.text&&(F.rate&&E(F.rate),F.pitch&&g(F.pitch),L(F.text,F.pitch?F.pitch:v,F.rate?F.rate:j))}),[C,F]),Object(s.useEffect)((function(){A!==M&&p(Math.floor(Math.random()*f.length))}),[M]),Object(s.useEffect)((function(){e.changeVoiceCallback({name:f[i].name,lang:f[i].lang})}),[i]),n.onvoiceschanged=function(){l(t())},h((function(){n.speaking||(e.speakOver(),y(!1),B(""))}),w?100:null);var J=function(e){y(!0),B(e);var t=new SpeechSynthesisUtterance(e);t.voice=f[i],t.pitch=v,t.rate=j,n.speak(t)},L=function(e,t,a){y(!0),B(e);var s=new SpeechSynthesisUtterance(e);s.voice=f[i],s.pitch=t,s.rate=a,n.speak(s)},P={onSubmitF:function(e){e.preventDefault(),J("hello")},voiceIndex:i,voiceOnChanged:p,voices:f,pitch:v,rate:j,pitchOnChanged:g,rateOnChanged:E},K=void 0!==f[i]?"".concat(f[i].name," (").concat(f[i].lang,")"):"";return o.a.createElement(o.a.Fragment,null,e.form&&o.a.createElement(I,P),o.a.createElement(W,{personName:K,sentence:U,speakingVoice:e.nowSpeak,nameColor:w?"black":"white"}),o.a.createElement(N,{show:w,speed:"0.3s"},o.a.createElement(R,null)))},D=n(7),z=n.n(D),U=[15,36,48,58],B=[],J=[];!function(){var e=n(81);e.keys().forEach((function(t){B.push(e(t))}))}(),console.log("soundPreload"),B.forEach((function(e){var t=new z.a.Player({url:e,fadeOut:5,fadeIn:5}).toMaster();J.push(t)}));var L=function(e){var t=Object(s.useState)(0),n=Object(r.a)(t,2),a=n[0],c=n[1];Object(s.useState)((function(){d("controlData",(function(e){console.log("controlData",e),e.sound&&p(e.sound)}))}));var i=function(){console.log("load Finished!")};Object(s.useEffect)((function(){z.a.Buffer.on("load",i)}),[J]),Object(s.useEffect)((function(){e.stop&&m()}),[e.stop]);var p=function(t){if(!e.stop)if(console.log(t),t.stop&&"*"!==t.stop)m();else{var n=-1;t.set?(n=Math.floor(Math.random()*(U[t.set]-U[t.set-1])),n+=U[t.set-1]):"order"in t&&(t.orderTo&&t.orderTo>t.order?(n=Math.floor(Math.random()*(t.orderTo-t.order)),n+=t.order):n=t.order),n>=0?(u(),"volume"in t&&l(n,t.volume),t.delay>0?setTimeout((function(){f(n)}),Math.floor(Math.random()*t.delay)):f(n)):"volume"in t&&J[a]&&"stopped"!==J[a].state&&l(a,t.volume)}},u=function(){J[a]&&J[a].loaded&&"stopped"!==J[a].state&&J[a].stop()},m=function(){J.forEach((function(e){void 0!==e&&e.loaded&&"stopped"!==e.state&&e.stop()})),c(0)},f=function(e){void 0!==J[e]&&(J[e].loaded?(console.log(e,"played!"),J[e].start(),c(e)):console.log(e+" not loaded!"))},l=function(e,t){J[e]&&J[e].loaded&&(J[e].volume.value=t)};return o.a.createElement("div",null)};var P=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(-1),p=Object(r.a)(i,2),u=p[0],m=p[1],f=Object(s.useState)(!1),_=Object(r.a)(f,2),v=_[0],g=_[1],O=Object(s.useState)(!1),x=Object(r.a)(O,2),j=x[0],E=x[1],S=Object(s.useState)(!1),k=Object(r.a)(S,2),w=k[0],y=k[1],C=Object(s.useState)({}),F=Object(r.a)(C,2),M=F[0],W=F[1],V=Object(s.useState)(),T=Object(r.a)(V,2),I=T[0],D=T[1],z=Object(s.useState)(null),U=Object(r.a)(z,2),B=U[0],J=U[1],P=Object(s.useState)([]),K=Object(r.a)(P,2),G=K[0],X=K[1];Object(s.useEffect)((function(){B&&$()}),[B]),Object(s.useEffect)((function(){!j&&I&&(console.log("emit voice!"),b("speakConfig",{mode:"changeVoice",voice:I}))}),[j,I]),Object(s.useState)((function(){l("/receiver",(function(){J(!0)})),d("disconnect",(function(){J(!1)})),d("debug",(function(e){console.log(e),"showForm"===e.mode&&y(e.value)})),d("speak",(function(e){a||(console.log("speak!",e),W(e),m(e.id),c(!0))})),d("speakConfig",(function(e){console.log(e),"changeVoice"===e.mode?$():"showForm"===e.mode?y(!0):"hideForm"===e.mode?y(!1):"nowSpeak"===e.mode&&X(e.data)}))})),h((function(){g(!v)}),j?100:null);var $=function(){E(!0),setTimeout((function(){E(!1)}),2e3)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(L,{stop:a}),o.a.createElement(N,{show:B},o.a.createElement(A,{toSpeak:a,data:M,speakOver:function(){c(!1),console.log("speak over",u),-1!==u&&b("speakOver",{id:u,voice:I})},changeVoice:v,changeVoiceCallback:function(e){D(e)},nowSpeak:G,form:w})),o.a.createElement(N,{show:!1===B},o.a.createElement(R,{bgColor:"black"},o.a.createElement("span",null,"CONNECTING SERVER"))))};n(140);var K=function(e){return o.a.createElement("div",{id:"LandpageWrapper"},o.a.createElement("button",{className:"selectBtn",onClick:e.select},"Start"))};var G=function(){var e=Object(s.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),i=Object(r.a)(c,2),p=i[0],u=i[1];return o.a.createElement("div",null,o.a.createElement(N,{show:n},o.a.createElement(K,{select:function(){a(!1),u(!0),window.speechSynthesis.speak(new SpeechSynthesisUtterance(""));var e=new z.a.Synth;e.oscillator.type="sine",e.toMaster(),e.triggerAttack("C4"),setTimeout((function(){e.triggerRelease()}),100)}})),o.a.createElement(N,{show:p},o.a.createElement(P,{start:p})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[46,1,2]]]);
//# sourceMappingURL=main.e276f952.chunk.js.map