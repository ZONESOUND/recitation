(this.webpackJsonpspeaking=this.webpackJsonpspeaking||[]).push([[0],{37:function(e,t,n){e.exports=n(71)},42:function(e,t,n){},43:function(e,t,n){},67:function(e,t){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(31),r=n.n(o),i=(n(42),n(1)),u=(n(43),n(5));function l(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}function s(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}var f=n(6);function h(){var e=Object(u.a)(["\n    margin: 0 auto;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    "]);return h=function(){return e},e}function v(){var e=Object(u.a)(["\n    margin: 1em;\n    width: 80%;\n    text-align: center;\n    min-height: 1.2em;\n    font-size: ",";\n    font-weight: ",";\n    ","\n    "]);return v=function(){return e},e}var m=f.a.span(v(),(function(e){return void 0===e.fontSize?"3em":e.fontSize}),(function(e){return void 0===e.fontWeight?"100":e.fontWeight}),(function(e){return void 0===e.color?"":"color:"+e.color+";"})),b=f.a.div(h());var p=function(e){return c.a.createElement(b,null,c.a.createElement(m,{color:e.nameColor},e.personName),c.a.createElement(m,{color:"orange",fontSize:"2em"},""===e.sentence?"":'"'.concat(e.sentence,'"')))},d=function(e){var t=e.show,n=e.speed,o=e.children;void 0===n&&(n="0.5s");var r=Object(a.useState)(t),u=Object(i.a)(r,2),l=u[0],s=u[1];Object(a.useEffect)((function(){t&&s(!0)}),[t]);return l&&c.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," ").concat(n)},onAnimationEnd:function(){t||s(!1)}},o)};function g(){var e=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: -10;\n  background: ",";  \n"]);return g=function(){return e},e}var O=f.a.div(g(),(function(e){return void 0===e.bgColor?"white":e.bgColor}));function j(e){var t=e.onSubmitF,n=e.voiceIndex,a=e.voiceOnChanged,o=e.voices,r=e.pitch,i=e.rate,u=e.pitchOnChanged,l=e.rateOnChanged;return console.log("speak form",n),c.a.createElement("form",{onSubmit:t},c.a.createElement("select",{value:n,onChange:function(e){a(e.target.value)}},o.map((function(e,t){return c.a.createElement("option",{key:t,value:t},"".concat(e.name," (").concat(e.lang,")"))}))),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"pitch"},"pitch"),c.a.createElement("input",{type:"number",step:.01,value:r,onChange:function(e){u(e.target.value)},id:"pitch"}),c.a.createElement("br",null),c.a.createElement("label",{htmlFor:"rate"},"rate"),c.a.createElement("input",{type:"number",step:.01,value:i,onChange:function(e){l(e.target.value)},id:"rate"}),c.a.createElement("input",{type:"submit"}))}var E,S=function(e){var t=window.speechSynthesis,n=Object(a.useState)(!0),o=Object(i.a)(n,2),r=(o[0],o[1],Object(a.useState)(t.getVoices())),u=Object(i.a)(r,2),f=u[0],h=u[1],v=Object(a.useState)(0),m=Object(i.a)(v,2),b=m[0],g=m[1],E=Object(a.useState)(1),S=Object(i.a)(E,2),k=S[0],w=S[1],C=Object(a.useState)(1),y=Object(i.a)(C,2),x=y[0],F=y[1],I=Object(a.useState)(!1),z=Object(i.a)(I,2),V=z[0],W=z[1],B=e.toSpeak,N=e.data,U=e.changeVoice,J=s(B),M=s(U),R=Object(a.useState)(""),T=Object(i.a)(R,2),A=T[0],D=T[1];Object(a.useEffect)((function(){B&&!V&&J!==B&&N.text&&(N.rate&&F(N.rate),N.pitch&&w(N.pitch),$(N.text,N.pitch?N.pitch:k,N.rate?N.rate:x))}),[B,N]),Object(a.useEffect)((function(){M!==U&&g(Math.floor(Math.random()*f.length))}),[U]),t.onvoiceschanged=function(){for(var e=t.getVoices(),n=0;n<e.length;n++)if(e[n].default){g(n);break}h(e)},l((function(){t.speaking||(e.speakOver(),W(!1))}),V?200:null);var L=function(e){W(!0),D(e);var n=new SpeechSynthesisUtterance(e);n.voice=f[b],n.pitch=k,n.rate=x,t.speak(n)},$=function(e,n,a){W(!0),D(e);var c=new SpeechSynthesisUtterance(e);c.voice=f[b],c.pitch=n,c.rate=a,t.speak(c)},q={onSubmitF:function(e){e.preventDefault(),L("hello")},voiceIndex:b,voiceOnChanged:g,voices:f,pitch:k,rate:x,pitchOnChanged:w,rateOnChanged:F},G=void 0!==f[b]?"".concat(f[b].name," (").concat(f[b].lang,")"):"";return c.a.createElement(c.a.Fragment,null,e.form&&c.a.createElement(j,q),c.a.createElement(p,{personName:G,sentence:A,nameColor:V?"black":"white"}),c.a.createElement(d,{show:V,speed:"0.3s"},c.a.createElement(O,null)))},k=n(34),w=n.n(k),C="https://stage-effect-server1.herokuapp.com",y=function(){!0,console.log("socket connect to server")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=w()(C+e);return void 0===E&&(E=n),n.on("connect",t),n},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;void 0!==E&&n.on(e,t)},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;n.emit(e,t)};var z=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],r=n[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),f=(s[0],s[1],Object(a.useState)(-1)),h=Object(i.a)(f,2),v=h[0],m=h[1],b=Object(a.useState)(!1),p=Object(i.a)(b,2),d=p[0],g=p[1],O=Object(a.useState)(!1),j=Object(i.a)(O,2),E=j[0],k=j[1],w=Object(a.useState)(!0),C=Object(i.a)(w,2),y=C[0],z=C[1],V=Object(a.useState)({}),W=Object(i.a)(V,2),B=W[0],N=W[1];Object(a.useEffect)((function(){e.start&&U()}),[e.start]),Object(a.useState)((function(){x("/receiver"),F("debug",(function(e){console.log(e),"showForm"===e.mode&&z(e.value)})),F("speak",(function(e){o||(console.log("speak!",e),N(e),m(e.id),r(!0))})),F("speakConfig",(function(e){console.log(e),"changeVoice"===e.mode&&U()}))})),l((function(){g(!d)}),E?100:null);var U=function(){k(!0),setTimeout((function(){k(!1)}),2e3)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,{toSpeak:o,data:B,speakOver:function(){r(!1),console.log("speak over",v),-1!==v&&I("speakOver",{id:v})},changeVoice:d,form:y}))};n(70);var V=function(e){return c.a.createElement("div",{id:"LandpageWrapper"},c.a.createElement("button",{className:"selectBtn",onClick:e.select},"Start"))};var W=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),u=Object(i.a)(r,2),l=u[0],s=u[1];return c.a.createElement("div",null,c.a.createElement(d,{show:n},c.a.createElement(V,{select:function(){o(!1),setTimeout((function(){s(!0)}),1e3),window.speechSynthesis.speak(new SpeechSynthesisUtterance(""))}})),c.a.createElement(d,{show:l},c.a.createElement(z,{start:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.3b5ef9cc.chunk.js.map